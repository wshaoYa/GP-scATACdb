(self["webpackChunkGP_ATACdb"]=self["webpackChunkGP_ATACdb"]||[]).push([[446],{390:function(e){((t,a)=>{e.exports=a()})(0,(()=>{"use strict";const e="object"===typeof window?window:this;e.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let t=null,a=!1;const l=e=>{try{e()}catch(t){}},n=e.WebStreamsPolyfill||{},r=e.isSecureContext;let o=/constructor/i.test(e.HTMLElement)||!!e.safari||!!e.WebKitPoint;const i=r||"MozAppearance"in document.documentElement.style?"iframe":"navigate",s={createWriteStream:u,WritableStream:e.WritableStream||n.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function d(e){if(!e)throw new Error("meh");const t=document.createElement("iframe");return t.hidden=!0,t.src=e,t.loaded=!1,t.name="iframe",t.isIframe=!0,t.postMessage=(...e)=>t.contentWindow.postMessage(...e),t.addEventListener("load",(()=>{t.loaded=!0}),{once:!0}),document.body.appendChild(t),t}function m(t){const a="width=200,height=100",l=document.createDocumentFragment(),n={frame:e.open(t,"popup",a),loaded:!1,isIframe:!1,isPopup:!0,remove(){n.frame.close()},addEventListener(...e){l.addEventListener(...e)},dispatchEvent(...e){l.dispatchEvent(...e)},removeEventListener(...e){l.removeEventListener(...e)},postMessage(...e){n.frame.postMessage(...e)}},r=t=>{t.source===n.frame&&(n.loaded=!0,e.removeEventListener("message",r),n.dispatchEvent(new Event("load")))};return e.addEventListener("message",r),n}try{new Response(new ReadableStream),r&&!("serviceWorker"in navigator)&&(o=!0)}catch(p){o=!0}function c(){t||(t=r?d(s.mitm):m(s.mitm))}function u(e,l,n){let r={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},m=0,u=null,p=null,g=null;if(Number.isFinite(l)?([n,l]=[l,n],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),r.size=n,r.writableStrategy=l):l&&l.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),r.size=n,r.writableStrategy=l):r=l||{},!o){c(),p=new MessageChannel,e=encodeURIComponent(e.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const l={transferringReadable:a,pathname:r.pathname||Math.random().toString().slice(-6)+"/"+e,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+e}};r.size&&(l.headers["Content-Length"]=r.size);const n=[l,"*",[p.port2]];if(a){const e="iframe"===i?void 0:{transform(e,t){if(!(e instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");m+=e.length,t.enqueue(e),u&&(location.href=u,u=null)},flush(){u&&(location.href=u)}};g=new s.TransformStream(e,r.writableStrategy,r.readableStrategy);const t=g.readable;p.port1.postMessage({readableStream:t},[t])}p.port1.onmessage=e=>{e.data.download?"navigate"===i?(t.remove(),t=null,m?location.href=e.data.download:u=e.data.download):(t.isPopup&&(t.remove(),t=null,"iframe"===i&&d(s.mitm)),d(e.data.download)):e.data.abort&&(h=[],p.port1.postMessage("abort"),p.port1.onmessage=null,p.port1.close(),p.port2.close(),p=null)},t.loaded?t.postMessage(...n):t.addEventListener("load",(()=>{t.postMessage(...n)}),{once:!0})}let h=[];return!o&&g&&g.writable||new s.WritableStream({write(e){if(!(e instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");o?h.push(e):(p.port1.postMessage(e),m+=e.length,u&&(location.href=u,u=null))},close(){if(o){const t=new Blob(h,{type:"application/octet-stream; charset=utf-8"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download=e,a.click()}else p.port1.postMessage("end")},abort(){h=[],p.port1.postMessage("abort"),p.port1.onmessage=null,p.port1.close(),p.port2.close(),p=null}},r.writableStrategy)}return l((()=>{const{readable:e}=new TransformStream,t=new MessageChannel;t.port1.postMessage(e,[e]),t.port1.close(),t.port2.close(),a=!0,Object.defineProperty(s,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})})),s}))},446:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return E}});var l=a(252);const n=e=>((0,l.dD)("data-v-9d65bcb2"),e=e(),(0,l.Cn)(),e),r={style:{width:"95%",margin:"2% auto",overflow:"hidden"}},o={class:"col-md-12","data-plugin-portlet":""},i={class:"formRow1"},s={class:"formRow2"},d={class:"formRow3"},m={style:{width:"95%",margin:"1% auto",overflow:"hidden"}},c={class:"col-md-12","data-plugin-portlet":""},u=n((()=>(0,l._)("i",{class:"ti-layers"},null,-1))),p=n((()=>(0,l._)("sup",null,[(0,l._)("span",{"data-html":"true","data-toggle":"tooltip","data-placement":"right",title:"The meaning of columns is explained in the Help page."},[(0,l._)("i",{class:"ti-info-alt",style:{"font-size":"70%"}})])],-1))),g=["innerHTML"],h=["onClick"],f=["onClick"],w={class:"table-foot",style:{margin:"3vh auto"}},b=n((()=>(0,l._)("div",null,null,-1)));function _(e,t,a,n,_,v){const y=(0,l.up)("Search"),W=(0,l.up)("el-icon"),S=(0,l.up)("el-input"),C=(0,l.up)("el-form-item"),k=(0,l.up)("el-option"),V=(0,l.up)("el-select"),E=(0,l.up)("el-button"),U=(0,l.up)("el-form"),z=(0,l.up)("el-collapse-item"),D=(0,l.up)("el-collapse"),M=(0,l.up)("el-table-column"),L=(0,l.up)("Download",!0),T=(0,l.up)("el-table"),A=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",r,[(0,l._)("div",o,[(0,l.Wm)(D,{modelValue:_.activeNames,"onUpdate:modelValue":t[7]||(t[7]=e=>_.activeNames=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{name:"1"},{title:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y)])),_:1}),(0,l.Uk)("  Search ")])),default:(0,l.w5)((()=>[(0,l.Wm)(U,{ref:"form",model:_.filter,"label-width":"130px"},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(C,{label:"Pb_gene :"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{modelValue:_.filter.pb_gene,"onUpdate:modelValue":t[0]||(t[0]=e=>_.filter.pb_gene=e),placeholder:"e.g. ATP5F1C",clearable:"",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C,{label:"Pb_ensembl :"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{modelValue:_.filter.pb_ensembl,"onUpdate:modelValue":t[1]||(t[1]=e=>_.filter.pb_ensembl=e),placeholder:"e.g. ENSG00000165629",clearable:"",style:{width:"85%"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C,{label:"n_sample range :"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{modelValue:_.filter.n_sample_greater,"onUpdate:modelValue":t[2]||(t[2]=e=>_.filter.n_sample_greater=e),style:{width:"80px"}},null,8,["modelValue"]),(0,l.Uk)(" -  "),(0,l.Wm)(S,{modelValue:_.filter.n_sample_less,"onUpdate:modelValue":t[3]||(t[3]=e=>_.filter.n_sample_less=e),style:{width:"80px"}},null,8,["modelValue"])])),_:1})]),(0,l._)("div",s,[(0,l.Wm)(C,{label:"Celline :"},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{modelValue:_.filter.celline,"onUpdate:modelValue":t[4]||(t[4]=e=>_.filter.celline=e),placeholder:"e.g. HepG2",clearable:"",style:{width:"70%"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(C,{label:"Method :"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:_.filter.method,"onUpdate:modelValue":t[5]||(t[5]=e=>_.filter.method=e),placeholder:"Please select the knockout method",style:{width:"100%"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.methodList,(e=>((0,l.wg)(),(0,l.j4)(k,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.Wm)(C,{label:"Datasource :"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{modelValue:_.filter.datasource,"onUpdate:modelValue":t[6]||(t[6]=e=>_.filter.datasource=e),placeholder:"Please select datasource",style:{width:"80%"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(_.datasourceList,(e=>((0,l.wg)(),(0,l.j4)(k,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,l._)("div",d,[(0,l.Wm)(C,{style:{"margin-left":"-120px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(E,{type:"success",onClick:v.onSubmit,style:{width:"100px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Submit")])),_:1},8,["onClick"]),(0,l.Wm)(E,{onClick:v.onReset,style:{"margin-left":"100px",width:"100px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("Reset")])),_:1},8,["onClick"])])),_:1})])])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"])])]),(0,l._)("div",m,[(0,l._)("div",c,[(0,l.Wm)(D,{modelValue:_.activeNames,"onUpdate:modelValue":t[8]||(t[8]=e=>_.activeNames=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(z,{name:"2"},{title:(0,l.w5)((()=>[u,(0,l.Uk)("  Downstream Data Download "),p])),default:(0,l.w5)((()=>[(0,l.Wm)(T,{data:_.tableData,border:"",stripe:"","table-layout":"auto","highlight-current-row":"",ref:"multipleTable","header-cell-class-name":"header-cell-class-name",style:{color:"black","margin-top":"20px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{prop:"id",label:"ID",align:"center"}),(0,l.Wm)(M,{prop:"pb_gene",label:"Pb_gene",align:"center"}),(0,l.Wm)(M,{prop:"celline",label:"Celline",align:"center"}),(0,l.Wm)(M,{prop:"accession",label:"Accession",align:"center"},{default:(0,l.w5)((e=>[(0,l._)("div",{innerHTML:e.row.accession},null,8,g)])),_:1}),(0,l.Wm)(M,{label:"Gene-Cluster activity matrix",align:"center"},{default:(0,l.w5)((e=>[(0,l._)("a",{href:"javascript:;",onClick:t=>v.dlNarrowPeaks(e.row)},[(0,l.Wm)(W,{style:{"text-align":"middle","vertical-align":"-15%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(L)])),_:1}),(0,l.Uk)("[tar]")],8,h)])),_:1}),(0,l.Wm)(M,{label:"Gene-Cell activity matrix",align:"center"},{default:(0,l.w5)((e=>[(0,l._)("a",{href:"javascript:;",onClick:t=>v.dlDBA(e.row)},[(0,l.Wm)(W,{style:{"text-align":"middle","vertical-align":"-15%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(L)])),_:1}),(0,l.Uk)("[tar]")],8,f)])),_:1})])),_:1},8,["data"]),(0,l._)("div",w,[b,(0,l.Wm)(A,{onSizeChange:v.handleSizeChange,onCurrentChange:v.handleCurrentChange,"current-page":_.currentPage,"page-sizes":[5,10,20],"page-size":_.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:_.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])),_:1})])),_:1},8,["modelValue"])])])],64)}var v=a(471),y=a(390),W=a.n(y);function S(e,t){fetch(e).then((e=>{const a=W().createWriteStream(t,{size:e.headers.get("content-length")}),l=e.body;if(window.WritableStream&&l.pipeTo)return l.pipeTo(a).then((()=>{}));window.writer=a.getWriter();const n=e.body.getReader(),r=()=>n.read().then((e=>e.done?window.writer.close():window.writer.write(e.value).then(r)));r()}))}var C={name:"download",data(){return{currentPage:1,total:0,pageSize:10,datasourceList:[],methodList:[],activeNames:["1","2"],globalID:1,timer:"",tableData:[],filter:{},paging:{start:0,length:10}}},methods:{load(){const e=this.$loading({lock:!0,background:"rgba(255,255,255,0.8)"});v.Z.get("/get_datasource_enum").then((e=>{this.datasourceList=e.data})),v.Z.get("/get_method_enum").then((e=>{this.methodList=e.data})),v.Z.post("/get_overall_data",{filter:this.filter,paging:this.paging}).then((t=>{this.tableData=t.data,this.total=t.records_sum,e.close()}))},onSubmit(){v.Z.post("/get_overall_data",{filter:this.filter,paging:this.paging}).then((e=>{this.tableData=e.data,this.total=e.records_sum}))},onReset(){this.filter={}},handleSizeChange(e){this.pageSize=e,this.paging.length=e,this.load()},handleCurrentChange(e){this.currentPage=e,this.paging.start=(e-1)*this.paging.length,this.load()},dlNarrowPeaks(e){e.id,e.pb_gene,e.celline;let t="http://43.143.155.140/scATACdb/GSE195882/download_files/norm_gene_activity_by_cluster.tar.gz",a="GSE195882_Prmt5_spleen_gene_activity_by_cluster.tar.gz";S(t,a)},dlDBA(e){let t=e.id,a=e.pb_gene,l=e.celline,n="http://43.143.155.140/scATACdb/GSE195882/download_files/norm_gene_activity_by_cell.tar.gz",r=`id-${t}_${a}_${l}_DBA_obj.tar.gz`;S(n,r)}},created(){this.load()}},k=a(744);const V=(0,k.Z)(C,[["render",_],["__scopeId","data-v-9d65bcb2"]]);var E=V}}]);
//# sourceMappingURL=446.bbe906c5.js.map